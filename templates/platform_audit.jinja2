{# ===== Platform Audit (Concise) ===== #}
📬 Respond with a **concise, high-impact platform audit** for a CTO board briefing.  
Be quantified, decisive, and specific to the prompt — avoid generic best practices.  
Output ≤250 words, McKinsey/Bain-style.

Prompt: {{ prompt }}
Tool: Platform Audit
{% if context %}Context: {{ context }}{% endif %}

{# Gatekeeping #}
{% if not flags.skipChecks %}
❌ Do not proceed unless the prompt contains:
- Cloud provider(s)
- Workload type(s)
- Team size or ops scope
- Mention of Kubernetes, CI/CD, or modern platform tools

If missing, ask 1–2 clarifying questions and stop.
{% endif %}

---

## 🚀 Executive Snapshot (90-Day)
- **Savings:** [Top 2–3 with £ or %] (e.g., “Rightsize EKS nodes: £65k/yr; remove idle LB: £12k/yr”)
- **Performance:** [1–2 gains] (e.g., “API P99 ↓40% via HPA + caching”)
- **Risk:** [1–2 critical fixes] (e.g., “Remove long-lived keys; enable CIS/KMS”)

---

## 📈 Quick Wins (0–90 Days)
- [Action + quantified impact]
- [Action + quantified impact]
- [Action + quantified impact]

---

## 🧠 Architecture Notes
- **Over/under-engineering:** Flag and justify.
- **Scale posture:** Autoscaling, spot/RI mix, region fit.
- **Delivery:** CI/CD bottlenecks, self-service.
- **Kubernetes:** Requests/limits, binpack, scaling configs.
- **Data/GenAI:** GPU utilisation, RAG/vector DB fit.
- **Security:** OIDC, least privilege, rotation cadence.

---

## 📊 KPI Scorecard
| Dimension         | /10 | Gap (one-liner)        |
|-------------------|-----|------------------------|
| Cost Efficiency   | {{ wa_cost or "TBD" }} | Idle LB, no SP/RI |
| Security          | {{ wa_security or "TBD" }} | Long-lived keys  |
| Reliability       | {{ wa_reliability or "TBD" }} | No DR test   |
| Delivery Velocity | {{ wa_operational or "TBD" }} | Manual gates |

---

{% if flags.deliveryPlan %}
## 🗓️ 30-Day Plan
- **W1:** Assess & map dependencies.
- **W2:** Rightsize + baseline observability/security.
- **W3:** Automate CI/CD, run perf/fault tests.
- **W4:** Go-live, KT, next workload roadmap.
{% endif %}

---

## 💡 Next Steps
- ✅ Cut £X/yr via rightsizing + LB consolidation  
- ✅ Enforce OIDC & rotation; remove static keys  
- ✅ Consolidate toolchain; standardise golden paths  

📬 For hands-on execution, contact **support@codeweave.co**.
